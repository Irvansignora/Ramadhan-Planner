<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Ramadhan">
<meta name="theme-color" content="#060D1F">
<meta name="description" content="Planner Ramadhan 30 Hari â€” Perjalanan Menuju Cahaya by IRVAN_SIGNORA">
<title>Ramadhan 30 Hari Planner</title>
<link rel="manifest" href="/manifest.json">
<link rel="apple-touch-icon" href="/icon-192.png">
<link rel="icon" type="image/png" sizes="192x192" href="/icon-192.png">
<link rel="icon" type="image/png" sizes="512x512" href="/icon-512.png">
<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700;900&family=Cinzel:wght@400;600;700&family=Lateef:wght@400;600&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&display=swap" rel="stylesheet">
<style>
  :root {
    --gold: #D4AF37;
    --gold-light: #F5E27A;
    --gold-dim: #8B6914;
    --navy: #060D1F;
    --navy-mid: #0D1B3E;
    --navy-card: #0A1530;
    --navy-border: #1A2E5A;
    --teal: #1A7A8A;
    --teal-glow: #2DD4BF;
    --cream: #F5ECD7;
    --cream-dim: #C9B88A;
    --white: #FFFFFF;
    --red-accent: #8B1A1A;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background-color: var(--navy);
    font-family: 'Cormorant Garamond', serif;
    color: var(--cream);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Stars background */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: 
      radial-gradient(1px 1px at 10% 15%, rgba(212,175,55,0.6) 0%, transparent 100%),
      radial-gradient(1px 1px at 25% 35%, rgba(255,255,255,0.5) 0%, transparent 100%),
      radial-gradient(1.5px 1.5px at 40% 10%, rgba(212,175,55,0.4) 0%, transparent 100%),
      radial-gradient(1px 1px at 60% 20%, rgba(255,255,255,0.4) 0%, transparent 100%),
      radial-gradient(1px 1px at 75% 5%, rgba(212,175,55,0.5) 0%, transparent 100%),
      radial-gradient(1.5px 1.5px at 85% 30%, rgba(255,255,255,0.3) 0%, transparent 100%),
      radial-gradient(1px 1px at 90% 50%, rgba(212,175,55,0.4) 0%, transparent 100%),
      radial-gradient(1px 1px at 15% 60%, rgba(255,255,255,0.3) 0%, transparent 100%),
      radial-gradient(1px 1px at 50% 70%, rgba(212,175,55,0.3) 0%, transparent 100%),
      radial-gradient(1.5px 1.5px at 30% 80%, rgba(255,255,255,0.4) 0%, transparent 100%),
      radial-gradient(1px 1px at 70% 85%, rgba(212,175,55,0.5) 0%, transparent 100%),
      radial-gradient(1px 1px at 5% 90%, rgba(255,255,255,0.3) 0%, transparent 100%),
      radial-gradient(1px 1px at 95% 75%, rgba(255,255,255,0.4) 0%, transparent 100%),
      radial-gradient(1px 1px at 45% 45%, rgba(212,175,55,0.3) 0%, transparent 100%),
      radial-gradient(1px 1px at 20% 50%, rgba(255,255,255,0.2) 0%, transparent 100%);
    pointer-events: none;
    z-index: 0;
  }

  .wrapper {
    max-width: 900px;
    margin: 0 auto;
    padding: 40px 24px 80px;
    position: relative;
    z-index: 1;
  }

  /* ======= HEADER ======= */
  .header {
    text-align: center;
    padding: 60px 20px 50px;
    position: relative;
  }

  .header-logo-wrap {
    position: relative;
    display: inline-block;
    margin-bottom: 12px;
  }

  .logo-star {
    position: absolute;
    top: -4px;
    right: -18px;
    animation: starPulse 2s ease-in-out infinite;
    filter: drop-shadow(0 0 6px rgba(212,175,55,0.7));
  }

  @keyframes starPulse {
    0%, 100% { opacity: 0.7; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.2); }
  }

  .moon-crescent {
    font-size: 64px;
    display: block;
    animation: moonFloat 4s ease-in-out infinite;
    filter: drop-shadow(0 0 20px rgba(212,175,55,0.8));
    margin-bottom: 12px;
  }

  @keyframes moonFloat {
    0%, 100% { transform: translateY(0) rotate(-5deg); }
    50% { transform: translateY(-10px) rotate(5deg); }
  }

  .arabic-title {
    font-family: 'Lateef', serif;
    font-size: 52px;
    color: var(--gold);
    letter-spacing: 2px;
    line-height: 1;
    text-shadow: 0 0 30px rgba(212,175,55,0.5);
    margin-bottom: 4px;
  }

  .main-title {
    font-family: 'Cinzel Decorative', serif;
    font-size: clamp(20px, 4vw, 32px);
    font-weight: 900;
    background: linear-gradient(135deg, var(--gold-light), var(--gold), var(--cream));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: 4px;
    text-transform: uppercase;
    margin-bottom: 8px;
  }

  .subtitle {
    font-family: 'Cinzel', serif;
    font-size: 13px;
    letter-spacing: 6px;
    color: var(--cream-dim);
    text-transform: uppercase;
  }

  .header-divider {
    display: flex;
    align-items: center;
    gap: 16px;
    margin: 24px auto;
    max-width: 400px;
  }

  .header-divider span {
    flex: 1;
    height: 1px;
    background: linear-gradient(to right, transparent, var(--gold), transparent);
  }

  .header-divider i {
    color: var(--gold);
    font-size: 18px;
  }

  /* ======= CARD BASE ======= */
  .card {
    background: linear-gradient(135deg, rgba(13,27,62,0.95), rgba(6,13,31,0.98));
    border: 1px solid var(--navy-border);
    border-radius: 16px;
    padding: 32px;
    margin-bottom: 28px;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(10px);
    box-shadow: 0 8px 40px rgba(0,0,0,0.5), inset 0 1px 0 rgba(212,175,55,0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .card:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 50px rgba(0,0,0,0.6), 0 0 40px rgba(212,175,55,0.05);
  }

  .card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--gold), transparent);
  }

  /* ======= TARGET BESAR ======= */
  .section-label {
    font-family: 'Cinzel', serif;
    font-size: 10px;
    letter-spacing: 5px;
    text-transform: uppercase;
    color: var(--gold-dim);
    margin-bottom: 8px;
  }

  .section-title {
    font-family: 'Cinzel Decorative', serif;
    font-size: clamp(14px, 2.5vw, 20px);
    font-weight: 700;
    color: var(--gold);
    margin-bottom: 24px;
    letter-spacing: 1px;
  }

  .target-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }

  @media (max-width: 600px) {
    .target-grid { grid-template-columns: 1fr; }
  }

  .target-item {
    background: rgba(212,175,55,0.05);
    border: 1px solid rgba(212,175,55,0.15);
    border-radius: 10px;
    padding: 16px;
    position: relative;
  }

  .target-item label {
    display: block;
    font-family: 'Cinzel', serif;
    font-size: 10px;
    letter-spacing: 3px;
    color: var(--gold);
    text-transform: uppercase;
    margin-bottom: 8px;
  }

  .target-item input[type="text"] {
    width: 100%;
    background: transparent;
    border: none;
    border-bottom: 1px solid rgba(212,175,55,0.3);
    color: var(--cream);
    font-family: 'Cormorant Garamond', serif;
    font-size: 16px;
    padding: 4px 0;
    outline: none;
    transition: border-color 0.3s;
  }

  .target-item input[type="text"]:focus {
    border-color: var(--gold);
  }

  .target-item input[type="text"]::placeholder {
    color: rgba(197,184,138,0.3);
    font-style: italic;
  }

  /* ======= WEEK SECTIONS ======= */
  .week-header {
    display: flex;
    align-items: flex-start;
    gap: 20px;
    margin-bottom: 24px;
  }

  .week-badge {
    flex-shrink: 0;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-family: 'Cinzel Decorative', serif;
    position: relative;
  }

  .week-badge .num {
    font-size: 22px;
    font-weight: 900;
    line-height: 1;
  }

  .week-badge .label {
    font-size: 7px;
    letter-spacing: 2px;
    text-transform: uppercase;
    line-height: 1;
    margin-top: 2px;
  }

  .w1 .week-badge { background: linear-gradient(135deg, #1A3A2A, #0D2018); border: 1px solid #2D6644; color: #5DBA8A; box-shadow: 0 0 20px rgba(46,160,102,0.2); }
  .w2 .week-badge { background: linear-gradient(135deg, #1A2A3A, #0D1820); border: 1px solid #2D4466; color: #5D8ABA; box-shadow: 0 0 20px rgba(46,100,180,0.2); }
  .w3 .week-badge { background: linear-gradient(135deg, #2A1A3A, #1A0D20); border: 1px solid #4A2D66; color: #9A5DBA; box-shadow: 0 0 20px rgba(120,46,180,0.2); }
  .w4 .week-badge { background: linear-gradient(135deg, #3A2A0D, #201808); border: 1px solid #8B6914; color: var(--gold); box-shadow: 0 0 20px rgba(212,175,55,0.3); }

  .w1::before { background: linear-gradient(90deg, transparent, #2D6644, transparent); }
  .w2::before { background: linear-gradient(90deg, transparent, #2D4466, transparent); }
  .w3::before { background: linear-gradient(90deg, transparent, #4A2D66, transparent); }
  .w4::before { background: linear-gradient(90deg, transparent, var(--gold), transparent); }

  .week-info { flex: 1; }

  .week-days {
    font-family: 'Cinzel', serif;
    font-size: 10px;
    letter-spacing: 4px;
    text-transform: uppercase;
    color: var(--cream-dim);
    margin-bottom: 4px;
  }

  .week-title {
    font-family: 'Cinzel Decorative', serif;
    font-size: clamp(13px, 2vw, 17px);
    font-weight: 700;
    margin-bottom: 6px;
  }

  .w1 .week-title { color: #5DBA8A; }
  .w2 .week-title { color: #5D8ABA; }
  .w3 .week-title { color: #9A5DBA; }
  .w4 .week-title { color: var(--gold); }

  .week-focus {
    font-style: italic;
    font-size: 14px;
    color: var(--cream-dim);
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .week-focus::before {
    content: 'âœ¦';
    font-style: normal;
    font-size: 10px;
  }

  /* ======= CHECKLIST ======= */
  .checklist-title {
    font-family: 'Cinzel', serif;
    font-size: 10px;
    letter-spacing: 4px;
    text-transform: uppercase;
    color: var(--cream-dim);
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 1px solid rgba(255,255,255,0.06);
  }

  .checklist {
    list-style: none;
    margin-bottom: 20px;
  }

  .checklist li {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 0;
    border-bottom: 1px solid rgba(255,255,255,0.04);
    font-size: 15px;
    transition: all 0.2s;
    cursor: pointer;
  }

  .checklist li:last-child { border-bottom: none; }

  .checklist li:hover { padding-left: 4px; }

  .check-box {
    width: 20px;
    height: 20px;
    border: 1.5px solid rgba(212,175,55,0.4);
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: all 0.2s;
    background: transparent;
    cursor: pointer;
  }

  .check-box.checked {
    background: var(--gold);
    border-color: var(--gold);
  }

  .check-box.checked::after {
    content: 'âœ“';
    color: var(--navy);
    font-size: 12px;
    font-weight: bold;
  }

  .check-text { flex: 1; }

  .check-text.checked {
    text-decoration: line-through;
    color: var(--cream-dim);
    opacity: 0.5;
  }

  /* ======= CHALLENGE BOX ======= */
  .challenge-box {
    border-radius: 10px;
    padding: 16px 20px;
    margin-top: 8px;
  }

  .w1 .challenge-box { background: rgba(46,160,102,0.07); border: 1px solid rgba(46,160,102,0.2); }
  .w2 .challenge-box { background: rgba(46,100,180,0.07); border: 1px solid rgba(46,100,180,0.2); }
  .w3 .challenge-box { background: rgba(120,46,180,0.07); border: 1px solid rgba(120,46,180,0.2); }
  .w4 .challenge-box { background: rgba(212,175,55,0.07); border: 1px solid rgba(212,175,55,0.2); }

  .challenge-label {
    font-family: 'Cinzel', serif;
    font-size: 9px;
    letter-spacing: 4px;
    text-transform: uppercase;
    margin-bottom: 10px;
  }

  .w1 .challenge-label { color: #5DBA8A; }
  .w2 .challenge-label { color: #5D8ABA; }
  .w3 .challenge-label { color: #9A5DBA; }
  .w4 .challenge-label { color: var(--gold); }

  .challenge-list {
    list-style: none;
  }

  .challenge-list li {
    font-size: 14px;
    font-style: italic;
    padding: 4px 0;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .challenge-list li::before {
    content: 'â—†';
    font-size: 8px;
    flex-shrink: 0;
  }

  .w1 .challenge-list li::before { color: #5DBA8A; }
  .w2 .challenge-list li::before { color: #5D8ABA; }
  .w3 .challenge-list li::before { color: #9A5DBA; }
  .w4 .challenge-list li::before { color: var(--gold); }

  /* ======= LAILATUL QADAR BOX ======= */
  .lailatul-box {
    background: linear-gradient(135deg, rgba(212,175,55,0.08), rgba(212,175,55,0.02));
    border: 1px solid rgba(212,175,55,0.3);
    border-radius: 12px;
    padding: 20px;
    margin-top: 16px;
    position: relative;
    overflow: hidden;
  }

  .lailatul-box::after {
    content: 'âœ¦';
    position: absolute;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 60px;
    color: rgba(212,175,55,0.05);
  }

  .lailatul-title {
    font-family: 'Cinzel', serif;
    font-size: 11px;
    letter-spacing: 4px;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 12px;
  }

  .lailatul-box ul {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .lailatul-box ul li {
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .lailatul-box ul li::before {
    content: 'ðŸŒ™';
    font-size: 12px;
  }

  /* ======= TRACKER ======= */
  .juz-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(68px, 1fr));
    gap: 8px;
  }

  .juz-item {
    background: rgba(212,175,55,0.04);
    border: 1px solid rgba(212,175,55,0.12);
    border-radius: 8px;
    padding: 8px 4px;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
  }

  .juz-item:hover {
    border-color: rgba(212,175,55,0.4);
    background: rgba(212,175,55,0.08);
  }

  .juz-item.done {
    background: rgba(212,175,55,0.15);
    border-color: var(--gold);
  }

  .juz-item.done .juz-check {
    color: var(--gold);
  }

  .juz-num {
    font-family: 'Cinzel', serif;
    font-size: 9px;
    letter-spacing: 1px;
    color: var(--cream-dim);
    text-transform: uppercase;
    margin-bottom: 4px;
  }

  .juz-check {
    font-size: 18px;
    color: rgba(255,255,255,0.1);
    line-height: 1;
    transition: all 0.2s;
  }

  .juz-item.done .juz-check {
    filter: drop-shadow(0 0 6px rgba(212,175,55,0.5));
  }

  /* ======= DAILY TEMPLATE ======= */
  .daily-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }

  @media (max-width: 600px) {
    .daily-grid { grid-template-columns: 1fr; }
  }

  .daily-section-title {
    font-family: 'Cinzel', serif;
    font-size: 9px;
    letter-spacing: 4px;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 12px;
    padding-bottom: 6px;
    border-bottom: 1px solid rgba(212,175,55,0.15);
  }

  .daily-field {
    margin-bottom: 16px;
  }

  .daily-field label {
    display: block;
    font-size: 11px;
    letter-spacing: 2px;
    color: var(--cream-dim);
    text-transform: uppercase;
    margin-bottom: 6px;
  }

  .daily-field input[type="text"],
  .daily-field textarea {
    width: 100%;
    background: rgba(255,255,255,0.02);
    border: none;
    border-bottom: 1px solid rgba(212,175,55,0.2);
    color: var(--cream);
    font-family: 'Cormorant Garamond', serif;
    font-size: 15px;
    padding: 6px 0;
    outline: none;
    resize: none;
    transition: border-color 0.3s;
  }

  .daily-field input[type="text"]:focus,
  .daily-field textarea:focus {
    border-color: var(--gold);
  }

  .daily-field input[type="text"]::placeholder,
  .daily-field textarea::placeholder {
    color: rgba(197,184,138,0.2);
    font-style: italic;
  }

  .sholat-boxes {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }

  .sholat-box {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    cursor: pointer;
  }

  .sholat-name {
    font-size: 10px;
    letter-spacing: 1px;
    color: var(--cream-dim);
    text-transform: uppercase;
  }

  .sholat-check-btn {
    width: 32px;
    height: 32px;
    border: 1.5px solid rgba(212,175,55,0.3);
    border-radius: 6px;
    background: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    color: transparent;
    font-size: 14px;
  }

  .sholat-check-btn.done {
    background: var(--gold);
    border-color: var(--gold);
    color: var(--navy);
    box-shadow: 0 0 10px rgba(212,175,55,0.4);
  }

  /* ======= MOOD TRACKER ======= */
  .mood-row {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }

  .mood-btn {
    padding: 6px 14px;
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 20px;
    background: transparent;
    color: var(--cream-dim);
    font-family: 'Cormorant Garamond', serif;
    font-size: 18px;
    cursor: pointer;
    transition: all 0.2s;
  }

  .mood-btn:hover, .mood-btn.active {
    border-color: var(--gold);
    background: rgba(212,175,55,0.1);
    transform: scale(1.1);
  }

  /* ======= ORNAMENTAL DIVIDER ======= */
  .ornament {
    text-align: center;
    color: var(--gold-dim);
    font-size: 16px;
    letter-spacing: 8px;
    margin: 8px 0 24px;
    opacity: 0.6;
  }

  /* ======= FOOTER ======= */
  .footer {
    text-align: center;
    padding: 40px 20px 20px;
    position: relative;
  }

  .footer-quote {
    font-family: 'Lateef', serif;
    font-size: 32px;
    color: rgba(212,175,55,0.5);
    margin-bottom: 8px;
  }

  .footer-text {
    font-style: italic;
    font-size: 14px;
    color: var(--cream-dim);
    opacity: 0.6;
  }

  /* ======= PROGRESS BAR ======= */
  .progress-section {
    margin-bottom: 28px;
  }

  .progress-label {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
  }

  .progress-label span:first-child {
    font-family: 'Cinzel', serif;
    font-size: 9px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--cream-dim);
  }

  .progress-label .progress-val {
    font-family: 'Cinzel', serif;
    font-size: 12px;
    color: var(--gold);
  }

  .progress-bar {
    height: 4px;
    background: rgba(255,255,255,0.06);
    border-radius: 2px;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    border-radius: 2px;
    background: linear-gradient(90deg, var(--gold-dim), var(--gold));
    transition: width 0.5s ease;
  }

  /* ======= TWO COLS ======= */
  .two-col {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }

  @media (max-width: 600px) {
    .two-col { grid-template-columns: 1fr; }
  }

  /* ======= ANIMATIONS ======= */
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .card {
    animation: fadeInUp 0.5s ease both;
  }

  .card:nth-child(1) { animation-delay: 0.1s; }
  .card:nth-child(2) { animation-delay: 0.2s; }
  .card:nth-child(3) { animation-delay: 0.3s; }
  .card:nth-child(4) { animation-delay: 0.4s; }
  .card:nth-child(5) { animation-delay: 0.5s; }

  /* ======= RAMADHAN START ROW ======= */
  .ramadhan-start-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    background: rgba(212,175,55,0.05);
    border: 1px solid rgba(212,175,55,0.15);
    border-radius: 12px;
    padding: 14px 18px;
    margin-bottom: 24px;
    flex-wrap: wrap;
  }
  .rs-label {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 22px;
  }

  /* ======= DAILY LOG SAVE SYSTEM ======= */
  .daily-log-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 4px;
    flex-wrap: wrap;
    gap: 12px;
  }

  .daily-nav {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .day-nav-btn {
    width: 32px;
    height: 32px;
    border: 1px solid rgba(212,175,55,0.25);
    background: transparent;
    border-radius: 8px;
    color: var(--gold);
    font-size: 14px;
    transition: all 0.2s;
  }
  .day-nav-btn:hover {
    background: rgba(212,175,55,0.1);
    border-color: rgba(212,175,55,0.5);
  }

  .current-day-badge {
    font-family: 'Cinzel Decorative', serif;
    font-size: 13px;
    font-weight: 700;
    color: var(--gold);
    padding: 5px 14px;
    background: rgba(212,175,55,0.08);
    border: 1px solid rgba(212,175,55,0.2);
    border-radius: 20px;
    min-width: 90px;
    text-align: center;
  }

  .daily-date-display {
    font-size: 13px;
    color: var(--cream-dim);
    font-style: italic;
    letter-spacing: 1px;
    opacity: 0.7;
  }

  .save-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 20px;
    padding-top: 16px;
    border-top: 1px solid rgba(255,255,255,0.06);
    flex-wrap: wrap;
    gap: 12px;
  }

  .save-status {
    font-size: 13px;
    color: var(--cream-dim);
    font-style: italic;
    opacity: 0.7;
  }
  .save-status.saved {
    color: #5DBA8A;
    opacity: 1;
  }

  .btn-save-record {
    padding: 12px 28px;
    background: linear-gradient(135deg, var(--gold-dim), var(--gold));
    border: none;
    border-radius: 10px;
    color: var(--navy);
    font-family: 'Cinzel', serif;
    font-size: 12px;
    font-weight: 700;
    letter-spacing: 2px;
    text-transform: uppercase;
    transition: all 0.3s;
    box-shadow: 0 4px 20px rgba(212,175,55,0.25);
  }
  .btn-save-record:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 30px rgba(212,175,55,0.4);
  }
  .btn-save-record:active {
    transform: translateY(0);
  }

  /* ======= RECORD HISTORY ======= */
  .record-history-card::before {
    background: linear-gradient(90deg, transparent, var(--gold-dim), transparent);
  }

  .rh-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
    flex-wrap: wrap;
    gap: 10px;
  }

  .btn-clear-all {
    padding: 7px 14px;
    background: transparent;
    border: 1px solid rgba(200,50,50,0.25);
    border-radius: 8px;
    color: rgba(255,120,120,0.6);
    font-family: 'Cinzel', serif;
    font-size: 10px;
    letter-spacing: 1px;
    text-transform: uppercase;
    transition: all 0.2s;
  }
  .btn-clear-all:hover {
    background: rgba(200,50,50,0.08);
    border-color: rgba(200,50,50,0.5);
    color: #ff8080;
  }

  .no-record {
    text-align: center;
    padding: 40px 20px;
    font-style: italic;
    color: var(--cream-dim);
    opacity: 0.5;
    font-size: 15px;
    line-height: 1.8;
  }
  .no-record span { font-size: 13px; }

  .record-item {
    background: rgba(255,255,255,0.02);
    border: 1px solid rgba(212,175,55,0.1);
    border-radius: 12px;
    margin-bottom: 12px;
    overflow: hidden;
    transition: border-color 0.2s;
  }
  .record-item:hover { border-color: rgba(212,175,55,0.25); }

  .record-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 14px 18px;
    cursor: pointer;
    user-select: none;
  }

  .record-header-left {
    display: flex;
    align-items: center;
    gap: 14px;
  }

  .record-day-badge {
    font-family: 'Cinzel Decorative', serif;
    font-size: 11px;
    font-weight: 700;
    color: var(--gold);
    background: rgba(212,175,55,0.1);
    border: 1px solid rgba(212,175,55,0.2);
    border-radius: 20px;
    padding: 4px 12px;
    white-space: nowrap;
  }

  .record-date {
    font-size: 13px;
    color: var(--cream-dim);
    font-style: italic;
  }

  .record-mood {
    font-size: 22px;
    line-height: 1;
  }

  .record-sholat-mini {
    display: flex;
    gap: 4px;
  }
  .sholat-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: rgba(255,255,255,0.1);
  }
  .sholat-dot.done { background: var(--gold); }

  .record-chevron {
    color: var(--cream-dim);
    font-size: 12px;
    transition: transform 0.3s;
    opacity: 0.5;
  }
  .record-item.open .record-chevron { transform: rotate(180deg); }

  .record-body {
    padding: 0 18px;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease, padding 0.3s;
  }
  .record-item.open .record-body {
    max-height: 500px;
    padding: 0 18px 16px;
  }

  .record-detail-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    padding-top: 12px;
    border-top: 1px solid rgba(255,255,255,0.05);
  }

  .record-detail-item label {
    display: block;
    font-family: 'Cinzel', serif;
    font-size: 8px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--gold-dim);
    margin-bottom: 4px;
  }
  .record-detail-item p {
    font-size: 14px;
    color: var(--cream);
    line-height: 1.5;
    font-style: italic;
  }
  .record-detail-item p:empty::before {
    content: 'â€”';
    opacity: 0.3;
  }

  .record-delete {
    display: block;
    margin-top: 12px;
    text-align: right;
    background: none;
    border: none;
    color: rgba(255,100,100,0.4);
    font-size: 12px;
    font-style: italic;
    cursor: pointer;
    transition: color 0.2s;
  }
  .record-delete:hover { color: rgba(255,100,100,0.8); }

  /* ======= FOOTER CREATOR ======= */
  .footer-creator {
    margin-top: 32px;
    padding-top: 24px;
    border-top: 1px solid rgba(212,175,55,0.1);
  }
  .creator-label {
    font-size: 12px;
    color: var(--cream-dim);
    opacity: 0.5;
    letter-spacing: 2px;
    margin-bottom: 4px;
  }
  .creator-name {
    font-family: 'Cinzel Decorative', serif;
    font-size: 18px;
    font-weight: 700;
    background: linear-gradient(135deg, var(--gold-light), var(--gold));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: 2px;
    margin-bottom: 20px;
  }

  .trakteer-btn {
    display: inline-flex;
    align-items: center;
    gap: 14px;
    padding: 16px 24px;
    background: linear-gradient(135deg, rgba(255,90,0,0.12), rgba(255,140,0,0.08));
    border: 1px solid rgba(255,100,0,0.25);
    border-radius: 14px;
    text-decoration: none;
    color: var(--cream);
    transition: all 0.3s;
    max-width: 360px;
    margin: 0 auto;
  }
  .trakteer-btn:hover {
    background: linear-gradient(135deg, rgba(255,90,0,0.2), rgba(255,140,0,0.14));
    border-color: rgba(255,120,0,0.5);
    transform: translateY(-2px);
    box-shadow: 0 8px 30px rgba(255,100,0,0.2);
  }
  .trakteer-icon {
    font-size: 28px;
    line-height: 1;
    flex-shrink: 0;
  }
  .trakteer-title {
    font-family: 'Cinzel', serif;
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: #FF8C00;
    margin-bottom: 3px;
  }
  .trakteer-sub {
    font-size: 12px;
    color: var(--cream-dim);
    font-style: italic;
  }
  .trakteer-arrow {
    font-size: 18px;
    color: #FF8C00;
    margin-left: auto;
    flex-shrink: 0;
    transition: transform 0.2s;
  }
  .trakteer-btn:hover .trakteer-arrow { transform: translateX(4px); }

  /* ======= KIRIM DOA SECTION ======= */
  .doa-card::before {
    background: linear-gradient(90deg, transparent, #25D366, transparent);
  }

  .doa-desc {
    font-size: 15px;
    font-style: italic;
    color: var(--cream-dim);
    margin-bottom: 24px;
    line-height: 1.6;
  }

  .doa-recipients {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 20px;
  }

  .recipient-card {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: rgba(37,211,102,0.06);
    border: 1px solid rgba(37,211,102,0.2);
    border-radius: 12px;
    padding: 14px 18px;
    animation: fadeInUp 0.3s ease;
  }

  .recipient-info {
    display: flex;
    align-items: center;
    gap: 14px;
  }

  .recipient-emoji {
    font-size: 28px;
    line-height: 1;
  }

  .recipient-name {
    font-family: 'Cinzel', serif;
    font-size: 14px;
    font-weight: 600;
    color: var(--cream);
    margin-bottom: 2px;
  }

  .recipient-hub {
    font-size: 12px;
    color: #25D366;
    letter-spacing: 1px;
  }

  .recipient-actions {
    display: flex;
    gap: 8px;
  }

  .btn-resend {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    background: #25D366;
    border: none;
    border-radius: 8px;
    color: white;
    font-family: 'Cinzel', serif;
    font-size: 11px;
    letter-spacing: 1px;
    font-weight: 600;
    transition: all 0.2s;
    text-transform: uppercase;
  }

  .btn-resend:hover {
    background: #1da851;
    transform: scale(1.03);
  }

  .btn-delete {
    width: 34px;
    height: 34px;
    border: 1px solid rgba(255,255,255,0.1);
    background: transparent;
    border-radius: 8px;
    color: var(--cream-dim);
    font-size: 14px;
    transition: all 0.2s;
  }

  .btn-delete:hover {
    border-color: rgba(200,50,50,0.4);
    color: #ff6b6b;
    background: rgba(200,50,50,0.08);
  }

  .btn-add-recipient {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    width: 100%;
    padding: 14px;
    background: transparent;
    border: 1.5px dashed rgba(37,211,102,0.3);
    border-radius: 12px;
    color: #25D366;
    font-family: 'Cinzel', serif;
    font-size: 12px;
    letter-spacing: 3px;
    text-transform: uppercase;
    transition: all 0.3s;
  }

  .btn-add-recipient:hover {
    background: rgba(37,211,102,0.06);
    border-color: rgba(37,211,102,0.6);
    transform: translateY(-1px);
  }

  .btn-icon {
    font-size: 18px;
    line-height: 1;
  }

  /* ======= MODAL ======= */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(3, 7, 18, 0.88);
    backdrop-filter: blur(8px);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }

  .modal-overlay.open {
    opacity: 1;
    pointer-events: all;
  }

  .modal {
    background: linear-gradient(145deg, #0D1B3E, #060D1F);
    border: 1px solid rgba(37,211,102,0.2);
    border-radius: 20px;
    width: 100%;
    max-width: 620px;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 30px 80px rgba(0,0,0,0.7), 0 0 60px rgba(37,211,102,0.05);
    transform: translateY(30px) scale(0.96);
    transition: transform 0.3s ease;
    position: relative;
  }

  .modal-overlay.open .modal {
    transform: translateY(0) scale(1);
  }

  .modal::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, #25D366, transparent);
    border-radius: 20px 20px 0 0;
  }

  .modal-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    padding: 28px 28px 20px;
    border-bottom: 1px solid rgba(255,255,255,0.05);
  }

  .modal-label {
    font-family: 'Cinzel', serif;
    font-size: 9px;
    letter-spacing: 5px;
    text-transform: uppercase;
    color: #25D366;
    margin-bottom: 4px;
  }

  .modal-title {
    font-family: 'Cinzel Decorative', serif;
    font-size: clamp(14px, 3vw, 20px);
    font-weight: 700;
    color: var(--cream);
  }

  .modal-close {
    width: 36px;
    height: 36px;
    border: 1px solid rgba(255,255,255,0.1);
    background: transparent;
    border-radius: 8px;
    color: var(--cream-dim);
    font-size: 14px;
    flex-shrink: 0;
    transition: all 0.2s;
  }

  .modal-close:hover {
    border-color: rgba(255,255,255,0.3);
    color: var(--cream);
    background: rgba(255,255,255,0.05);
  }

  .modal-body {
    padding: 24px 28px;
    display: flex;
    flex-direction: column;
    gap: 24px;
  }

  .modal-footer {
    padding: 20px 28px 28px;
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    border-top: 1px solid rgba(255,255,255,0.05);
  }

  /* ======= MODAL STEPS ======= */
  .modal-step {
    background: rgba(255,255,255,0.02);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 14px;
    padding: 20px;
  }

  .step-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;
  }

  .step-num {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: rgba(37,211,102,0.15);
    border: 1px solid rgba(37,211,102,0.3);
    color: #25D366;
    font-family: 'Cinzel', serif;
    font-size: 13px;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .step-label {
    font-family: 'Cinzel', serif;
    font-size: 11px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--cream-dim);
  }

  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-bottom: 16px;
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .form-group label {
    font-family: 'Cinzel', serif;
    font-size: 9px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--cream-dim);
  }

  .form-group input,
  .form-group textarea,
  #inp-doa {
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 8px;
    color: var(--cream);
    font-family: 'Cormorant Garamond', serif;
    font-size: 16px;
    padding: 10px 14px;
    outline: none;
    transition: border-color 0.2s;
    width: 100%;
  }

  .form-group input:focus,
  #inp-doa:focus {
    border-color: rgba(37,211,102,0.4);
    background: rgba(37,211,102,0.03);
  }

  .form-group input::placeholder,
  #inp-doa::placeholder {
    color: rgba(197,184,138,0.25);
    font-style: italic;
  }

  #inp-doa {
    resize: vertical;
    min-height: 120px;
    line-height: 1.6;
  }

  .hubungan-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 6px;
  }

  .hub-btn {
    padding: 6px 4px;
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 8px;
    color: var(--cream-dim);
    font-family: 'Cormorant Garamond', serif;
    font-size: 13px;
    transition: all 0.2s;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .hub-btn:hover {
    border-color: rgba(37,211,102,0.3);
    background: rgba(37,211,102,0.05);
    color: var(--cream);
  }

  .hub-btn.selected {
    background: rgba(37,211,102,0.12);
    border-color: rgba(37,211,102,0.5);
    color: #25D366;
    font-weight: 600;
  }

  .wa-input-wrap {
    display: flex;
    align-items: center;
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 8px;
    overflow: hidden;
    transition: border-color 0.2s;
  }

  .wa-input-wrap:focus-within {
    border-color: rgba(37,211,102,0.4);
    background: rgba(37,211,102,0.03);
  }

  .wa-prefix {
    padding: 10px 12px;
    background: rgba(37,211,102,0.08);
    border-right: 1px solid rgba(255,255,255,0.08);
    color: #25D366;
    font-family: 'Cinzel', serif;
    font-size: 13px;
    font-weight: 600;
    white-space: nowrap;
    flex-shrink: 0;
  }

  .wa-input-wrap input {
    border: none !important;
    background: transparent !important;
    border-radius: 0 !important;
    flex: 1;
  }

  .wa-hint {
    font-size: 11px;
    color: rgba(197,184,138,0.4);
    font-style: italic;
    margin-top: 4px;
  }

  /* Template Grid */
  .template-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
  }

  .tpl-card {
    background: rgba(255,255,255,0.02);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 10px;
    padding: 14px 12px;
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
  }

  .tpl-card:hover {
    border-color: rgba(37,211,102,0.3);
    background: rgba(37,211,102,0.04);
    transform: translateY(-2px);
  }

  .tpl-card.active {
    border-color: rgba(37,211,102,0.5);
    background: rgba(37,211,102,0.1);
  }

  .tpl-icon {
    font-size: 24px;
    margin-bottom: 6px;
  }

  .tpl-name {
    font-family: 'Cinzel', serif;
    font-size: 10px;
    letter-spacing: 1px;
    font-weight: 700;
    color: var(--cream);
    margin-bottom: 4px;
  }

  .tpl-preview {
    font-size: 11px;
    color: var(--cream-dim);
    font-style: italic;
    line-height: 1.4;
  }

  /* Char count */
  .char-count {
    text-align: right;
    font-size: 12px;
    color: var(--cream-dim);
    opacity: 0.5;
    margin-top: 6px;
  }

  /* Preview */
  .preview-box {
    background: rgba(37,211,102,0.04);
    border: 1px solid rgba(37,211,102,0.15);
    border-radius: 14px;
    padding: 20px;
  }

  .preview-label {
    font-family: 'Cinzel', serif;
    font-size: 9px;
    letter-spacing: 4px;
    text-transform: uppercase;
    color: #25D366;
    margin-bottom: 12px;
  }

  .preview-content {
    font-size: 14px;
    line-height: 1.8;
    color: var(--cream);
    white-space: pre-wrap;
    word-break: break-word;
    max-height: 200px;
    overflow-y: auto;
  }

  /* Buttons */
  .btn-cancel {
    padding: 12px 24px;
    background: transparent;
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 10px;
    color: var(--cream-dim);
    font-family: 'Cinzel', serif;
    font-size: 11px;
    letter-spacing: 2px;
    text-transform: uppercase;
    transition: all 0.2s;
  }

  .btn-cancel:hover {
    border-color: rgba(255,255,255,0.25);
    color: var(--cream);
  }

  .btn-send {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 28px;
    background: #25D366;
    border: none;
    border-radius: 10px;
    color: white;
    font-family: 'Cinzel', serif;
    font-size: 12px;
    letter-spacing: 2px;
    text-transform: uppercase;
    font-weight: 700;
    transition: all 0.3s;
    box-shadow: 0 4px 20px rgba(37,211,102,0.3);
  }

  .btn-send:hover:not(:disabled) {
    background: #1da851;
    transform: translateY(-1px);
    box-shadow: 0 8px 30px rgba(37,211,102,0.4);
  }

  .btn-send:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    box-shadow: none;
  }

  /* Toast notification */
  .toast {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    background: linear-gradient(135deg, #1da851, #25D366);
    color: white;
    padding: 14px 28px;
    border-radius: 50px;
    font-family: 'Cinzel', serif;
    font-size: 12px;
    letter-spacing: 2px;
    text-transform: uppercase;
    z-index: 9999;
    box-shadow: 0 8px 30px rgba(37,211,102,0.4);
    transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .toast.show {
    transform: translateX(-50%) translateY(0);
  }

  /* ======= TARGET PROGRESS ======= */
  .target-progress-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 8px;
  }

  .target-prog-bar {
    flex: 1;
    height: 4px;
    background: rgba(212,175,55,0.12);
    border-radius: 4px;
    overflow: hidden;
  }

  .target-prog-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--gold-dim), var(--gold));
    border-radius: 4px;
    transition: width 0.4s ease;
    width: 0%;
  }

  .target-prog-val {
    font-family: 'Cinzel', serif;
    font-size: 10px;
    color: var(--gold);
    min-width: 32px;
    text-align: right;
  }

  .target-update-section {
    margin-top: 24px;
    padding-top: 20px;
    border-top: 1px solid rgba(212,175,55,0.1);
  }

  .target-update-title {
    font-family: 'Cinzel', serif;
    font-size: 10px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--gold-dim);
    margin-bottom: 14px;
  }

  .target-update-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 14px;
  }

  @media (max-width: 600px) {
    .target-update-grid { grid-template-columns: 1fr; }
  }

  .target-update-item label {
    display: block;
    font-size: 10px;
    letter-spacing: 2px;
    color: var(--cream-dim);
    text-transform: uppercase;
    margin-bottom: 6px;
  }

  .target-update-row {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .target-update-item input[type="number"] {
    flex: 1;
    min-width: 0;
    background: rgba(212,175,55,0.05);
    border: 1px solid rgba(212,175,55,0.2);
    border-radius: 6px;
    color: var(--cream);
    font-family: 'Cormorant Garamond', serif;
    font-size: 15px;
    padding: 6px 10px;
    outline: none;
    transition: border-color 0.2s;
  }

  .target-update-item input[type="number"]:focus {
    border-color: var(--gold);
  }

  .target-unit {
    font-size: 12px;
    color: var(--cream-dim);
    white-space: nowrap;
    font-style: italic;
  }

  /* ======= FOOTER ======= */
  .site-footer {
    text-align: center;
    padding: 32px 20px 20px;
    border-top: 1px solid rgba(212,175,55,0.08);
    margin-top: 20px;
  }

  .footer-logo {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin-bottom: 12px;
  }

  .footer-moon {
    font-size: 18px;
    filter: drop-shadow(0 0 6px rgba(212,175,55,0.5));
  }

  .footer-brand {
    font-family: 'Cinzel', serif;
    font-size: 12px;
    letter-spacing: 4px;
    color: var(--gold);
    text-transform: uppercase;
  }

  .footer-socials {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 16px;
    margin-bottom: 12px;
    flex-wrap: wrap;
  }

  .social-link {
    display: flex;
    align-items: center;
    gap: 5px;
    color: var(--cream-dim);
    text-decoration: none;
    font-size: 11px;
    font-family: 'Cinzel', serif;
    letter-spacing: 1px;
    opacity: 0.65;
    transition: opacity 0.2s, color 0.2s;
  }

  .social-link:hover {
    opacity: 1;
    color: var(--gold);
  }

  .footer-copy {
    font-size: 10px;
    color: rgba(197,184,138,0.3);
    letter-spacing: 1px;
    font-style: italic;
  }

  /* Print styles */
  @media print {
    body { background: white; color: black; }
    .card { border: 1px solid #ccc; box-shadow: none; }
  }

  /* ======= COMPREHENSIVE MOBILE RESPONSIVE ======= */
  @media (max-width: 768px) {
    .wrapper { padding: 20px 14px 60px; }
    
    .header { padding: 32px 12px 28px; }
    .arabic-title { font-size: 38px; }
    .main-title { font-size: 20px; letter-spacing: 2px; }
    .subtitle { font-size: 10px; letter-spacing: 3px; }
    
    .card { padding: 20px 16px; margin-bottom: 18px; border-radius: 12px; }
    
    .section-title { font-size: 15px; }
    
    /* Target grid */
    .target-grid { grid-template-columns: 1fr; gap: 12px; }
    .target-item { padding: 12px; }
    .target-update-grid { grid-template-columns: 1fr; gap: 10px; }
    
    /* Week sections */
    .week-header { flex-direction: row; gap: 12px; align-items: flex-start; }
    .week-badge { width: 44px; height: 44px; flex-shrink: 0; }
    .week-badge .num { font-size: 18px; }
    .week-title { font-size: 13px; }
    .week-focus { font-size: 12px; }
    
    /* Checklist */
    .checklist li { font-size: 13px; padding: 7px 0; }
    
    /* Progress */
    .ramadhan-start-row { flex-direction: column; gap: 10px; align-items: flex-start; }
    
    /* Daily log */
    .daily-log-header { flex-direction: column; gap: 10px; align-items: flex-start; }
    .daily-nav { align-self: flex-end; }
    .two-col { grid-template-columns: 1fr !important; }
    .daily-grid { grid-template-columns: 1fr; gap: 0; }
    
    /* Sholat boxes */
    .sholat-boxes { gap: 5px; }
    .sholat-box { padding: 8px 4px; flex: 1; min-width: 52px; }
    .sholat-name { font-size: 10px; letter-spacing: 0; }
    
    /* Mood row */
    .mood-row { gap: 6px; }
    .mood-btn { font-size: 20px; width: 40px; height: 40px; }
    
    /* Juz grid */
    .juz-grid { grid-template-columns: repeat(5, 1fr); gap: 6px; }
    .juz-item { padding: 6px 2px; }
    .juz-num { font-size: 8px; }
    .juz-check { font-size: 15px; }
    
    /* Record history */
    .record-detail-grid { grid-template-columns: 1fr !important; }
    .rh-header { flex-direction: row; gap: 10px; }
    
    /* Doa section */
    .doa-desc { font-size: 13px; }
    .btn-add-recipient { padding: 14px 20px; font-size: 13px; }
    
    /* Modal */
    .modal { max-height: 92vh; border-radius: 20px 20px 0 0; margin-top: auto; }
    .modal-body { padding: 16px; gap: 16px; }
    .modal-header { padding: 16px 16px 12px; }
    .modal-footer { padding: 12px 16px 20px; }
    .form-row { grid-template-columns: 1fr; }
    .template-grid { grid-template-columns: repeat(2, 1fr); gap: 8px; }
    .hubungan-grid { grid-template-columns: repeat(4, 1fr); gap: 5px; }
    .hub-btn { font-size: 11px; padding: 5px 3px; }
    .tpl-card { padding: 10px 8px; }
    .tpl-icon { font-size: 20px; }
    .tpl-name { font-size: 9px; }
    .tpl-preview { font-size: 10px; }

    /* Footer */
    .site-footer { padding: 24px 16px 36px; }
    .footer-socials { gap: 12px; }
    .social-link { font-size: 10px; }
    .footer-brand { font-size: 11px; letter-spacing: 3px; }
    
    /* Save bar */
    .save-bar { flex-direction: column; gap: 10px; align-items: stretch; }
    .btn-save-record { text-align: center; }
    
    /* Lailatul box */
    .lailatul-box ul li { font-size: 13px; }
  }

  @media (max-width: 480px) {
    .wrapper { padding: 16px 12px 60px; }
    .header { padding: 28px 10px 20px; }
    .moon-crescent { font-size: 48px; }
    .arabic-title { font-size: 32px; }
    .main-title { font-size: 17px; letter-spacing: 1px; }
    
    .card { padding: 16px 14px; }
    
    .juz-grid { grid-template-columns: repeat(5, 1fr); }
    
    /* Sholat boxes full row */
    .sholat-boxes { display: grid; grid-template-columns: repeat(5, 1fr); gap: 4px; }
    .sholat-box { padding: 8px 2px; flex-direction: column; }
    
    .week-badge { width: 38px; height: 38px; }
    .week-badge .num { font-size: 16px; }
    
    .recipient-card { flex-direction: column; gap: 10px; align-items: flex-start; }
    .recipient-actions { align-self: flex-end; }
    
    .footer-socials { flex-direction: column; gap: 8px; }
  }

  /* ======= PWA INSTALL BANNER ======= */
  #pwa-install-bar {
    display: none;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(135deg, #0D1B3E, #060D1F);
    border-top: 1px solid rgba(212,175,55,0.3);
    padding: 14px 20px;
    z-index: 9998;
    align-items: center;
    gap: 12px;
    box-shadow: 0 -8px 30px rgba(0,0,0,0.5);
  }

  #pwa-install-bar.show { display: flex; }

  .pwa-install-icon { font-size: 28px; flex-shrink: 0; }

  .pwa-install-text { flex: 1; }

  .pwa-install-title {
    font-family: 'Cinzel', serif;
    font-size: 11px;
    letter-spacing: 2px;
    color: var(--gold);
    text-transform: uppercase;
    margin-bottom: 2px;
  }

  .pwa-install-sub {
    font-size: 11px;
    color: var(--cream-dim);
    font-style: italic;
  }

  .pwa-install-btn {
    background: linear-gradient(135deg, var(--gold), var(--gold-dim));
    color: var(--navy);
    border: none;
    border-radius: 8px;
    padding: 9px 16px;
    font-family: 'Cinzel', serif;
    font-size: 10px;
    letter-spacing: 2px;
    font-weight: 700;
    text-transform: uppercase;
    cursor: pointer;
    flex-shrink: 0;
    white-space: nowrap;
  }

  .pwa-install-close {
    background: transparent;
    border: none;
    color: var(--cream-dim);
    font-size: 16px;
    cursor: pointer;
    padding: 4px;
    flex-shrink: 0;
    opacity: 0.6;
  }

  /* Safe area for notch phones */
  @supports (padding-bottom: env(safe-area-inset-bottom)) {
    .wrapper { padding-bottom: calc(60px + env(safe-area-inset-bottom)); }
    #pwa-install-bar { padding-bottom: calc(14px + env(safe-area-inset-bottom)); }
    .site-footer { padding-bottom: calc(36px + env(safe-area-inset-bottom)); }
  }

  /* Modal bottom sheet on mobile */
  @media (max-width: 600px) {
    .modal-overlay { align-items: flex-end; padding: 0; }
    .modal { border-radius: 20px 20px 0 0; max-height: 90vh; width: 100%; }
  }

</style>
</head>
<body>
<div class="wrapper">

  <!-- HEADER -->
  <div class="header">
    <div class="header-logo-wrap">
      <span class="moon-crescent">ðŸŒ™</span>
      <svg class="logo-star" width="22" height="22" viewBox="0 0 24 24" fill="none">
        <path d="M12 2l2.09 6.26L20 10l-5.91 1.74L12 22l-2.09-6.26L4 14l5.91-1.74z" fill="#D4AF37" opacity="0.85"/>
      </svg>
    </div>
    <div class="arabic-title">Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ</div>
    <h1 class="main-title">Ramadhan Planner</h1>
    <div class="subtitle">30 Hari Perjalanan Menuju Cahaya</div>
    <div class="header-divider">
      <span></span>
      <i>âœ¦</i>
      <span></span>
    </div>
  </div>

  <!-- TARGET BESAR -->
  <div class="card">
    <div class="section-label">Sebelum Memulai</div>
    <div class="section-title">ðŸŽ¯ Target Besar Ramadhan</div>
    <div class="target-grid">
      <div class="target-item">
        <label>ðŸ“– Target Khatam</label>
        <input type="text" id="target-khatam" placeholder="contoh: 2 kali" oninput="saveTargets()">
        <div class="target-progress-row" id="prog-khatam-row" style="display:none">
          <div class="target-prog-bar"><div class="target-prog-fill" id="prog-khatam-fill"></div></div>
          <span class="target-prog-val" id="prog-khatam-val">0%</span>
        </div>
      </div>
      <div class="target-item">
        <label>ðŸ’° Target Sedekah Total</label>
        <input type="text" id="target-sedekah" placeholder="Rp ___" oninput="saveTargets()">
        <div class="target-progress-row" id="prog-sedekah-row" style="display:none">
          <div class="target-prog-bar"><div class="target-prog-fill" id="prog-sedekah-fill"></div></div>
          <span class="target-prog-val" id="prog-sedekah-val">0%</span>
        </div>
      </div>
      <div class="target-item">
        <label>ðŸ“¿ Hafalan Baru</label>
        <input type="text" id="target-hafalan" placeholder="contoh: 5 surat" oninput="saveTargets()">
        <div class="target-progress-row" id="prog-hafalan-row" style="display:none">
          <div class="target-prog-bar"><div class="target-prog-fill" id="prog-hafalan-fill"></div></div>
          <span class="target-prog-val" id="prog-hafalan-val">0%</span>
        </div>
      </div>
      <div class="target-item">
        <label>ðŸŒ± Kebiasaan yang Dibangun</label>
        <input type="text" id="target-kebiasaan-bangun" placeholder="tulis di sini..." oninput="saveTargets()">
      </div>
      <div class="target-item" style="grid-column: 1 / -1;">
        <label>ðŸš« Kebiasaan yang Ditinggalkan</label>
        <input type="text" id="target-kebiasaan-tinggal" placeholder="tulis di sini..." oninput="saveTargets()">
      </div>
    </div>

    <!-- Target Progress Update -->
    <div class="target-update-section">
      <div class="target-update-title">ðŸ“ˆ Update Progress Target</div>
      <div class="target-update-grid">
        <div class="target-update-item">
          <label>Khatam ke-</label>
          <div class="target-update-row">
            <input type="number" id="prog-khatam-input" min="0" placeholder="0" oninput="updateTargetProgress('khatam')">
            <span class="target-unit" id="prog-khatam-unit">/ â€”</span>
          </div>
        </div>
        <div class="target-update-item">
          <label>Sedekah terkumpul (Rp)</label>
          <div class="target-update-row">
            <input type="number" id="prog-sedekah-input" min="0" placeholder="0" oninput="updateTargetProgress('sedekah')">
            <span class="target-unit" id="prog-sedekah-unit">/ â€”</span>
          </div>
        </div>
        <div class="target-update-item">
          <label>Hafalan tercapai</label>
          <div class="target-update-row">
            <input type="number" id="prog-hafalan-input" min="0" placeholder="0" oninput="updateTargetProgress('hafalan')">
            <span class="target-unit" id="prog-hafalan-unit">/ â€”</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- PROGRESS TRACKER -->
  <div class="card">
    <div class="section-label">Pantau Perjalananmu</div>
    <div class="section-title">ðŸ“Š Progress Ramadhan</div>

    <div class="ramadhan-start-row">
      <div class="rs-label">
        <span>ðŸ—“ï¸</span>
        <div>
          <div style="font-family:'Cinzel',serif;font-size:9px;letter-spacing:3px;text-transform:uppercase;color:var(--cream-dim)">Tanggal Mulai Ramadhan</div>
          <div style="font-size:12px;color:var(--cream-dim);font-style:italic;margin-top:2px">Set sekali, progress otomatis terhitung</div>
        </div>
      </div>
      <input type="date" id="ramadhan-start-input" onchange="saveRamadhanStart(this.value)" style="background:rgba(212,175,55,0.08);border:1px solid rgba(212,175,55,0.25);border-radius:8px;color:var(--cream);font-family:'Cormorant Garamond',serif;font-size:15px;padding:8px 12px;outline:none;color-scheme:dark;">
    </div>

    <div class="progress-section">
      <div class="progress-label">
        <span>Hari Berlalu</span>
        <span class="progress-val" id="hari-label">0 / 30 hari</span>
      </div>
      <div class="progress-bar"><div class="progress-fill" id="hari-bar" style="width:0%"></div></div>
    </div>
    <div class="progress-section">
      <div class="progress-label">
        <span>Juz Terbaca</span>
        <span class="progress-val" id="juz-label">0 / 30 juz</span>
      </div>
      <div class="progress-bar"><div class="progress-fill" id="juz-bar" style="width:0%"></div></div>
    </div>
    <div class="progress-section">
      <div class="progress-label">
        <span>Record Harian Tersimpan</span>
        <span class="progress-val" id="record-label">0 hari</span>
      </div>
      <div class="progress-bar"><div class="progress-fill" id="record-bar" style="width:0%"></div></div>
    </div>
  </div>

  <!-- MINGGU 1 -->
  <div class="card w1">
    <div class="week-header">
      <div class="week-badge w1">
        <div class="num">1</div>
        <div class="label">Week</div>
      </div>
      <div class="week-info">
        <div class="week-days">Hari 1 â€“ 7</div>
        <div class="week-title">Bangun Fondasi</div>
        <div class="week-focus">Fokus: Adaptasi & Konsistensi</div>
      </div>
    </div>

    <div class="checklist-title">Daily Checklist</div>
    <ul class="checklist" id="checklist-w1">
      <li onclick="toggleCheck(this)"><div class="check-box"></div><span class="check-text">ðŸ•Œ Sholat 5 waktu tepat waktu</span></li>
      <li onclick="toggleCheck(this)"><div class="check-box"></div><span class="check-text">ðŸŒ™ Tarawih (masjid / rumah)</span></li>
      <li onclick="toggleCheck(this)"><div class="check-box"></div><span class="check-text">ðŸ“– Baca Qur'an 1 juz / 10â€“20 halaman</span></li>
      <li onclick="toggleCheck(this)"><div class="check-box"></div><span class="check-text">ðŸ¤² Sedekah (walau kecil)</span></li>
      <li onclick="toggleCheck(this)"><div class="check-box"></div><span class="check-text">ðŸ‘… Tahan lisan & emosi</span></li>
      <li onclick="toggleCheck(this)"><div class="check-box"></div><span class="check-text">ðŸ’­ 10 menit refleksi sebelum tidur</span></li>
    </ul>

    <div class="challenge-box">
      <div class="challenge-label">âš¡ Challenge Mingguan</div>
      <ul class="challenge-list">
        <li>Kurangi scrolling tidak penting</li>
        <li>Tidak gibah 7 hari full (ini lebih berat dari puasa ðŸ˜…)</li>
      </ul>
    </div>
  </div>

  <!-- MINGGU 2 -->
  <div class="card w2">
    <div class="week-header">
      <div class="week-badge w2">
        <div class="num">2</div>
        <div class="label">Week</div>
      </div>
      <div class="week-info">
        <div class="week-days">Hari 8 â€“ 14</div>
        <div class="week-title">Upgrade Ibadah</div>
        <div class="week-focus">Fokus: Tambah Kualitas</div>
      </div>
    </div>

    <div class="checklist-title">âœ… Semua dari Minggu 1, ditambah:</div>
    <ul class="checklist" id="checklist-w2">
      <li onclick="toggleCheck(this)"><div class="check-box"></div><span class="check-text">ðŸŒƒ Qiyamul lail minimal 2 rakaat</span></li>
      <li onclick="toggleCheck(this)"><div class="check-box"></div><span class="check-text">â˜€ï¸ Dzikir pagi & petang</span></li>
      <li onclick="toggleCheck(this)"><div class="check-box"></div><span class="check-text">ðŸ“¿ Hafal 1 surat pendek</span></li>
      <li onclick="toggleCheck(this)"><div class="check-box"></div><span class="check-text">ðŸ‘¨â€ðŸ‘©â€ðŸ‘§ Bantu orang tua / keluarga tanpa disuruh</span></li>
    </ul>

    <div class="challenge-box">
      <div class="challenge-label">âš¡ Challenge Mingguan</div>
      <ul class="challenge-list">
        <li>1 hari full tanpa marah</li>
        <li>Sedekah ke orang yang benar-benar butuh</li>
      </ul>
    </div>
  </div>

  <!-- MINGGU 3 -->
  <div class="card w3">
    <div class="week-header">
      <div class="week-badge w3">
        <div class="num">3</div>
        <div class="label">Week</div>
      </div>
      <div class="week-info">
        <div class="week-days">Hari 15 â€“ 21</div>
        <div class="week-title">Naik Level</div>
        <div class="week-focus">Fokus: Kedalaman & Kesadaran</div>
      </div>
    </div>

    <div class="checklist-title">âœ… Semua dari Minggu 1â€“2, ditambah:</div>
    <ul class="checklist" id="checklist-w3">
      <li onclick="toggleCheck(this)"><div class="check-box"></div><span class="check-text">ðŸ§  Tadabbur (pahami arti 1 halaman Qur'an)</span></li>
      <li onclick="toggleCheck(this)"><div class="check-box"></div><span class="check-text">ðŸ” Perbanyak istighfar (100x/hari)</span></li>
      <li onclick="toggleCheck(this)"><div class="check-box"></div><span class="check-text">ðŸ½ï¸ Kurangi makanan berlebihan saat berbuka</span></li>
      <li onclick="toggleCheck(this)"><div class="check-box"></div><span class="check-text">ðŸ¤ Perbaiki hubungan (minta maaf / silaturahmi)</span></li>
    </ul>

    <div class="challenge-box">
      <div class="challenge-label">âš¡ Challenge Mingguan</div>
      <ul class="challenge-list">
        <li>Detoks ego â€” jangan suka merasa paling benar</li>
        <li>Kurangi flexing duniawi</li>
      </ul>
    </div>
  </div>

  <!-- MINGGU 4 -->
  <div class="card w4">
    <div class="week-header">
      <div class="week-badge w4">
        <div class="num">4</div>
        <div class="label">Week</div>
      </div>
      <div class="week-info">
        <div class="week-days">Hari 22 â€“ 30</div>
        <div class="week-title">Mode All Out âœ¨</div>
        <div class="week-focus">Fokus: 10 Malam Terakhir</div>
      </div>
    </div>

    <div class="checklist-title">âœ… Semua dari Minggu 1â€“3, ditambah:</div>
    <ul class="checklist" id="checklist-w4">
      <li onclick="toggleCheck(this)"><div class="check-box"></div><span class="check-text">ðŸŒƒ Qiyamul lail lebih lama & khusyuk</span></li>
      <li onclick="toggleCheck(this)"><div class="check-box"></div><span class="check-text">ðŸ•Œ I'tikaf (kalau memungkinkan)</span></li>
      <li onclick="toggleCheck(this)"><div class="check-box"></div><span class="check-text">ðŸ¤² Doa khusus setiap malam</span></li>
      <li onclick="toggleCheck(this)"><div class="check-box"></div><span class="check-text">â­ Fokus cari Lailatul Qadar</span></li>
    </ul>

    <div class="lailatul-box">
      <div class="lailatul-title">ðŸŒŸ Strategi 10 Malam Terakhir</div>
      <ul>
        <li>Bikin daftar doa prioritas (karir, keluarga, masa depan)</li>
        <li>Doa pakai bahasa sendiri, jangan formal doang</li>
        <li>Lebih sedikit ngobrol, lebih banyak dzikir</li>
        <li>Malam 21, 23, 25, 27, 29 â€” perbanyak amalan</li>
      </ul>
    </div>
  </div>

  <!-- TRACKER KHATAM -->
  <div class="card">
    <div class="section-label">Bonus Feature</div>
    <div class="section-title">ðŸ“— Tracker Khatam 30 Juz</div>
    <div class="juz-grid" id="juz-grid"></div>
    <div style="margin-top: 16px; font-size: 13px; color: var(--cream-dim); font-style: italic; text-align: center;">Klik juz untuk tandai sudah dibaca âœ“</div>
  </div>

  <!-- DAILY LOG WITH SAVE -->
  <div class="card" id="daily-log-card">
    <div class="section-label">Template Harian</div>
    <div class="daily-log-header">
      <div class="section-title" style="margin-bottom:0">ðŸ“‹ Daily Log</div>
      <div class="daily-nav">
        <button class="day-nav-btn" onclick="navigateDay(-1)" title="Hari sebelumnya">â—€</button>
        <div class="current-day-badge" id="current-day-badge">Hari â€”</div>
        <button class="day-nav-btn" onclick="navigateDay(1)" title="Hari berikutnya">â–¶</button>
      </div>
    </div>
    <div class="daily-date-display" id="daily-date-display">Pilih tanggal mulai Ramadhan dulu</div>

    <div class="two-col" style="margin-bottom: 20px; margin-top: 20px;">
      <div class="daily-field">
        <label>ðŸ˜Š Mood Hari Ini</label>
        <div class="mood-row" id="mood-row">
          <button class="mood-btn" onclick="setMood(this,'ðŸ˜´')" data-mood="ðŸ˜´">ðŸ˜´</button>
          <button class="mood-btn" onclick="setMood(this,'ðŸ˜Š')" data-mood="ðŸ˜Š">ðŸ˜Š</button>
          <button class="mood-btn" onclick="setMood(this,'ðŸ”¥')" data-mood="ðŸ”¥">ðŸ”¥</button>
          <button class="mood-btn" onclick="setMood(this,'ðŸ˜Œ')" data-mood="ðŸ˜Œ">ðŸ˜Œ</button>
          <button class="mood-btn" onclick="setMood(this,'ðŸ’ª')" data-mood="ðŸ’ª">ðŸ’ª</button>
        </div>
      </div>
      <div class="daily-field">
        <label>ðŸ’ Sedekah Hari Ini</label>
        <input type="text" id="dl-sedekah" placeholder="Rp atau bentuk lain" oninput="autoSaveDraft()">
      </div>
    </div>

    <div class="daily-section-title">ðŸ•Œ Ibadah Harian</div>

    <div class="daily-field">
      <label>Sholat Wajib</label>
      <div class="sholat-boxes" id="sholat-boxes">
        <div class="sholat-box">
          <span class="sholat-name">Subuh</span>
          <button class="sholat-check-btn" onclick="toggleSholat(this,'Subuh')" data-sholat="Subuh">âœ“</button>
        </div>
        <div class="sholat-box">
          <span class="sholat-name">Dzuhur</span>
          <button class="sholat-check-btn" onclick="toggleSholat(this,'Dzuhur')" data-sholat="Dzuhur">âœ“</button>
        </div>
        <div class="sholat-box">
          <span class="sholat-name">Ashar</span>
          <button class="sholat-check-btn" onclick="toggleSholat(this,'Ashar')" data-sholat="Ashar">âœ“</button>
        </div>
        <div class="sholat-box">
          <span class="sholat-name">Maghrib</span>
          <button class="sholat-check-btn" onclick="toggleSholat(this,'Maghrib')" data-sholat="Maghrib">âœ“</button>
        </div>
        <div class="sholat-box">
          <span class="sholat-name">Isya</span>
          <button class="sholat-check-btn" onclick="toggleSholat(this,'Isya')" data-sholat="Isya">âœ“</button>
        </div>
      </div>
    </div>

    <div class="daily-grid">
      <div>
        <div class="daily-field">
          <label>ðŸ“– Qur'an (halaman)</label>
          <input type="text" id="dl-quran" placeholder="contoh: 20 halaman" oninput="autoSaveDraft()">
        </div>
        <div class="daily-field">
          <label>ðŸ¤² Sunnah</label>
          <input type="text" id="dl-sunnah" placeholder="rawatib, duha, dll" oninput="autoSaveDraft()">
        </div>
        <div class="daily-field">
          <label>ðŸ’ª Amalan Tambahan</label>
          <input type="text" id="dl-amalan" placeholder="dzikir, puasa sunnah..." oninput="autoSaveDraft()">
        </div>
      </div>
      <div>
        <div class="daily-field">
          <label>ðŸŒ± Perbaikan Diri Hari Ini</label>
          <textarea rows="3" id="dl-perbaikan" placeholder="Apa yang kamu perbaiki hari ini?" oninput="autoSaveDraft()"></textarea>
        </div>
        <div class="daily-field">
          <label>ðŸ™ Hal yang Disyukuri</label>
          <textarea rows="3" id="dl-syukur" placeholder="Minimal 3 hal..." oninput="autoSaveDraft()"></textarea>
        </div>
      </div>
    </div>

    <div class="daily-field" style="margin-top:4px">
      <label>ðŸ¤² Doa Spesial Hari Ini</label>
      <textarea rows="2" id="dl-doa" placeholder="Doa yang paling ingin kamu panjatkan hari ini..." oninput="autoSaveDraft()"></textarea>
    </div>

    <div class="save-bar">
      <div class="save-status" id="save-status">âœï¸ Belum disimpan</div>
      <button class="btn-save-record" onclick="saveRecord()">
        ðŸ’¾ Simpan Record Hari Ini
      </button>
    </div>
  </div>

  <!-- RECORD HISTORY -->
  <div class="card record-history-card">
    <div class="section-label">Catatan Ramadhanku</div>
    <div class="rh-header">
      <div class="section-title" style="margin-bottom:0">ðŸ“š Riwayat Harian</div>
      <button class="btn-clear-all" onclick="confirmClearAll()">ðŸ—‘ï¸ Hapus Semua</button>
    </div>
    <div id="record-list">
      <div class="no-record">Belum ada record tersimpan.<br><span>Isi daily log di atas dan klik "Simpan" âœ¨</span></div>
    </div>
  </div>

  <!-- KIRIM DOA VIA WA -->
  <div class="card doa-card">
    <div class="section-label">Fitur Spesial</div>
    <div class="section-title">ðŸ’Œ Kirim Doa ke Orang Tercinta</div>
    <p class="doa-desc">Bagikan doa terbaikmu di bulan Ramadhan ini kepada orang-orang yang kamu sayangi â€” langsung via WhatsApp.</p>

    <div class="doa-recipients" id="doa-recipients">
      <!-- recipient cards will be added here -->
    </div>

    <button class="btn-add-recipient" onclick="openModal()">
      <span class="btn-icon">ï¼‹</span>
      <span>Tambah Penerima Doa</span>
    </button>
  </div>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="footer-logo">
      <span class="footer-moon">ðŸŒ™</span>
      <span class="footer-brand">IRVAN_SIGNORA</span>
    </div>
    <div class="footer-socials">
      <a href="https://instagram.com/irvan_signora" target="_blank" class="social-link" title="Instagram">
        <svg width="15" height="15" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
        <span>@irvan_signora</span>
      </a>
      <a href="https://twitter.com/irvan_signora" target="_blank" class="social-link" title="Twitter / X">
        <svg width="15" height="15" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
        <span>@irvan_signora</span>
      </a>
      <a href="https://threads.net/@irvan_signora" target="_blank" class="social-link" title="Threads">
        <svg width="15" height="15" viewBox="0 0 24 24" fill="currentColor"><path d="M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.589 12c.027 3.086.718 5.496 2.057 7.164 1.43 1.783 3.631 2.698 6.54 2.717 2.623-.02 4.358-.631 5.8-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.31-.71-.873-1.3-1.634-1.75-.192 1.352-.622 2.446-1.284 3.272-.886 1.102-2.14 1.704-3.73 1.79-1.202.065-2.361-.218-3.259-.801-1.063-.689-1.685-1.74-1.752-2.964-.065-1.19.408-2.285 1.33-3.082.88-.76 2.119-1.207 3.583-1.291a13.853 13.853 0 0 1 3.02.142c-.126-.742-.375-1.332-.75-1.757-.513-.586-1.308-.883-2.359-.89h-.029c-.844 0-1.992.232-2.721 1.32L7.734 7.847c.98-1.454 2.568-2.256 4.478-2.256h.044c3.194.02 5.097 1.975 5.287 5.388.108.046.216.094.321.142 1.49.7 2.58 1.761 3.154 3.07.797 1.822.871 4.667-1.478 6.979C17.88 23.088 15.553 23.98 12.186 24z"/></svg>
        <span>@irvan_signora</span>
      </a>
    </div>
    <div class="footer-copy">Made with ðŸ¤² for Ramadhan Â· Â© 2025</div>
  </footer>

  <!-- MODAL KIRIM DOA -->
  <div class="modal-overlay" id="modal-overlay" onclick="closeModalOutside(event)">
    <div class="modal" id="modal">
      <div class="modal-header">
        <div>
          <div class="modal-label">Ramadhan Mubarak</div>
          <div class="modal-title">ðŸ¤² Kirim Doa via WhatsApp</div>
        </div>
        <button class="modal-close" onclick="closeModal()">âœ•</button>
      </div>

      <div class="modal-body">
        <!-- Step 1: Penerima -->
        <div class="modal-step" id="step-1">
          <div class="step-header">
            <div class="step-num">1</div>
            <div class="step-label">Info Penerima</div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Nama Penerima</label>
              <input type="text" id="inp-nama" placeholder="contoh: Ibu, Ayah, Sayang..." oninput="updatePreview()">
            </div>
            <div class="form-group">
              <label>Hubungan</label>
              <div class="hubungan-grid" id="hubungan-grid">
                <button class="hub-btn" onclick="selectHubungan(this, 'Ayah', 'ðŸ‘¨')">ðŸ‘¨ Ayah</button>
                <button class="hub-btn" onclick="selectHubungan(this, 'Ibu', 'ðŸ‘©')">ðŸ‘© Ibu</button>
                <button class="hub-btn" onclick="selectHubungan(this, 'Suami', 'ðŸ’‘')">ðŸ’‘ Suami</button>
                <button class="hub-btn" onclick="selectHubungan(this, 'Istri', 'ðŸ’‘')">ðŸ’‘ Istri</button>
                <button class="hub-btn" onclick="selectHubungan(this, 'Kakak', 'ðŸ«‚')">ðŸ«‚ Kakak</button>
                <button class="hub-btn" onclick="selectHubungan(this, 'Adik', 'ðŸ«‚')">ðŸ«‚ Adik</button>
                <button class="hub-btn" onclick="selectHubungan(this, 'Sahabat', 'ðŸ¤')">ðŸ¤ Sahabat</button>
                <button class="hub-btn" onclick="selectHubungan(this, 'Lainnya', 'ðŸ’›')">ðŸ’› Lainnya</button>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label>Nomor WhatsApp Penerima</label>
            <div class="wa-input-wrap">
              <span class="wa-prefix">+62</span>
              <input type="tel" id="inp-wa" placeholder="812-3456-7890" oninput="updatePreview()">
            </div>
            <div class="wa-hint">Isi tanpa angka 0 di depan. Contoh: 81234567890</div>
          </div>
        </div>

        <!-- Step 2: Template Doa -->
        <div class="modal-step" id="step-2">
          <div class="step-header">
            <div class="step-num">2</div>
            <div class="step-label">Pilih Template Doa</div>
          </div>

          <div class="template-grid">
            <div class="tpl-card" onclick="selectTemplate(this, 'umum')">
              <div class="tpl-icon">ðŸŒ™</div>
              <div class="tpl-name">Doa Umum</div>
              <div class="tpl-preview">Semoga Ramadhan ini penuh berkah...</div>
            </div>
            <div class="tpl-card" onclick="selectTemplate(this, 'ortu')">
              <div class="tpl-icon">â¤ï¸</div>
              <div class="tpl-name">Untuk Orang Tua</div>
              <div class="tpl-preview">Semoga Allah senantiasa menjaga...</div>
            </div>
            <div class="tpl-card" onclick="selectTemplate(this, 'pasangan')">
              <div class="tpl-icon">ðŸ’‘</div>
              <div class="tpl-name">Untuk Pasangan</div>
              <div class="tpl-preview">Terima kasih sudah menemani...</div>
            </div>
            <div class="tpl-card" onclick="selectTemplate(this, 'sahabat')">
              <div class="tpl-icon">ðŸ¤</div>
              <div class="tpl-name">Untuk Sahabat</div>
              <div class="tpl-preview">Di bulan yang mulia ini, aku titip doa...</div>
            </div>
            <div class="tpl-card" onclick="selectTemplate(this, 'maaf')">
              <div class="tpl-icon">ðŸ™</div>
              <div class="tpl-name">Mohon Maaf</div>
              <div class="tpl-preview">Minta maaf dari hati yang tulus...</div>
            </div>
            <div class="tpl-card active" onclick="selectTemplate(this, 'custom')">
              <div class="tpl-icon">âœï¸</div>
              <div class="tpl-name">Tulis Sendiri</div>
              <div class="tpl-preview">Doa langsung dari hatimu...</div>
            </div>
          </div>
        </div>

        <!-- Step 3: Tulis/Edit Doa -->
        <div class="modal-step" id="step-3">
          <div class="step-header">
            <div class="step-num">3</div>
            <div class="step-label">Pesan Doamu</div>
          </div>

          <textarea id="inp-doa" rows="8" placeholder="Tulis doamu dari hati..." oninput="updatePreview()"></textarea>

          <div class="char-count"><span id="char-count">0</span> karakter</div>
        </div>

        <!-- Preview -->
        <div class="preview-box">
          <div class="preview-label">ðŸ“± Preview Pesan WA</div>
          <div class="preview-content" id="preview-content">
            <span style="opacity:0.4;font-style:italic">Isi form di atas untuk melihat preview pesan...</span>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn-cancel" onclick="closeModal()">Batal</button>
        <button class="btn-send" onclick="sendWhatsApp()" id="btn-send" disabled>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
          </svg>
          Kirim via WhatsApp
        </button>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <div class="footer">
    <div class="header-divider" style="margin: 0 auto 20px;">
      <span></span>
      <i style="color:var(--gold)">âœ¦</i>
      <span></span>
    </div>
    <div class="footer-quote">Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ…</div>
    <div class="footer-text">Semoga Ramadhan ini menjadi yang terbaik dalam hidupmu.</div>
    <div style="margin-top: 8px; font-size: 11px; letter-spacing: 3px; text-transform: uppercase; color: rgba(197,184,138,0.3); font-family: 'Cinzel', serif;">Allahu Akbar âœ¦ 1446 H</div>

    <a href="https://trakteer.id/irvansignora/tip" target="_blank" rel="noopener" class="trakteer-btn">
      <span class="trakteer-icon">â˜•</span>
      <div>
        <div class="trakteer-title">Trakteer Creator</div>
        <div class="trakteer-sub">Jika bermanfaat, yuk berbagi rezeki ðŸ™</div>
      </div>
      <span class="trakteer-arrow">â†’</span>
    </a>
  </div>

</div>

<script>
  // ===========================
  // RAMADHAN STATE & PERSISTENCE
  // ===========================
  let ramadhanStartDate = null;
  let currentDayIndex = 1;
  let currentMood = '';
  let currentSholat = [];

  // Load saved ramadhan start
  const savedStart = localStorage.getItem('ramadhan_start');
  if (savedStart) {
    ramadhanStartDate = new Date(savedStart);
    document.getElementById('ramadhan-start-input').value = savedStart;
    initDayFromDate();
  }

  function saveRamadhanStart(val) {
    if (!val) return;
    localStorage.setItem('ramadhan_start', val);
    ramadhanStartDate = new Date(val);
    initDayFromDate();
    updateProgressBars();
  }

  function initDayFromDate() {
    if (!ramadhanStartDate) return;
    const today = new Date(); today.setHours(0,0,0,0);
    const start = new Date(ramadhanStartDate); start.setHours(0,0,0,0);
    const diff = Math.floor((today - start) / 86400000) + 1;
    currentDayIndex = Math.max(1, Math.min(30, diff));
    updateProgressBars();
    loadDayIntoForm(currentDayIndex);
  }

  function updateProgressBars() {
    if (ramadhanStartDate) {
      const today = new Date(); today.setHours(0,0,0,0);
      const start = new Date(ramadhanStartDate); start.setHours(0,0,0,0);
      const diff = Math.floor((today - start) / 86400000) + 1;
      const dayNum = Math.max(0, Math.min(30, diff));
      document.getElementById('hari-label').textContent = `${dayNum} / 30 hari`;
      document.getElementById('hari-bar').style.width = `${(dayNum/30)*100}%`;
    }
    const recCount = Object.keys(getAllRecords()).length;
    document.getElementById('record-label').textContent = `${recCount} hari`;
    document.getElementById('record-bar').style.width = `${(recCount/30)*100}%`;
  }

  // ===========================
  // DAY NAVIGATION
  // ===========================
  function navigateDay(delta) {
    const next = currentDayIndex + delta;
    if (next < 1 || next > 30) return;
    currentDayIndex = next;
    loadDayIntoForm(currentDayIndex);
  }

  function getDayDate(dayIdx) {
    if (!ramadhanStartDate) return null;
    const d = new Date(ramadhanStartDate);
    d.setDate(d.getDate() + dayIdx - 1);
    return d;
  }

  function formatDate(d) {
    return d ? d.toLocaleDateString('id-ID', {weekday:'long',day:'numeric',month:'long',year:'numeric'}) : '';
  }

  function loadDayIntoForm(dayIdx) {
    document.getElementById('current-day-badge').textContent = `Hari ${dayIdx}`;
    const d = getDayDate(dayIdx);
    document.getElementById('daily-date-display').textContent = d ? formatDate(d) : 'Set tanggal mulai Ramadhan dulu';

    const existing = localStorage.getItem(`record_day_${dayIdx}`);
    currentMood = ''; currentSholat = [];
    document.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('.sholat-check-btn').forEach(b => b.classList.remove('done'));
    ['dl-quran','dl-sunnah','dl-amalan','dl-sedekah','dl-perbaikan','dl-syukur','dl-doa'].forEach(id => {
      document.getElementById(id).value = '';
    });

    if (existing) {
      const rec = JSON.parse(existing);
      if (rec.mood) { currentMood = rec.mood; document.querySelectorAll('.mood-btn').forEach(b => { if(b.dataset.mood===rec.mood) b.classList.add('active'); }); }
      if (rec.sholat) { currentSholat = rec.sholat; document.querySelectorAll('.sholat-check-btn').forEach(b => { if(rec.sholat.includes(b.dataset.sholat)) b.classList.add('done'); }); }
      ['quran','sunnah','amalan','sedekah','perbaikan','syukur','doa'].forEach(f => { if(rec[f]) document.getElementById('dl-'+f).value = rec[f]; });
      document.getElementById('save-status').textContent = `âœ… Tersimpan`;
      document.getElementById('save-status').className = 'save-status saved';
    } else {
      document.getElementById('save-status').textContent = `âœï¸ Belum disimpan`;
      document.getElementById('save-status').className = 'save-status';
    }
  }

  // ===========================
  // MOOD & SHOLAT
  // ===========================
  function setMood(btn, mood) {
    document.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    currentMood = mood;
    markUnsaved();
  }

  function toggleSholat(btn, name) {
    btn.classList.toggle('done');
    currentSholat = currentSholat.includes(name) ? currentSholat.filter(s=>s!==name) : [...currentSholat, name];
    markUnsaved();
  }

  function autoSaveDraft() { markUnsaved(); }
  function markUnsaved() {
    document.getElementById('save-status').textContent = 'âœï¸ Ada perubahan belum disimpan';
    document.getElementById('save-status').className = 'save-status';
  }

  // ===========================
  // SAVE RECORD
  // ===========================
  function saveRecord() {
    const record = {
      day: currentDayIndex,
      date: getDayDate(currentDayIndex)?.toISOString() || '',
      mood: currentMood,
      sholat: [...currentSholat],
      quran: document.getElementById('dl-quran').value,
      sunnah: document.getElementById('dl-sunnah').value,
      amalan: document.getElementById('dl-amalan').value,
      sedekah: document.getElementById('dl-sedekah').value,
      perbaikan: document.getElementById('dl-perbaikan').value,
      syukur: document.getElementById('dl-syukur').value,
      doa: document.getElementById('dl-doa').value,
      savedAt: new Date().toISOString()
    };
    localStorage.setItem(`record_day_${currentDayIndex}`, JSON.stringify(record));
    document.getElementById('save-status').textContent = `âœ… Tersimpan pukul ${new Date().toLocaleTimeString('id-ID',{hour:'2-digit',minute:'2-digit'})}`;
    document.getElementById('save-status').className = 'save-status saved';
    updateProgressBars();
    renderRecordHistory();
    showToast(`Record Hari ${currentDayIndex} tersimpan! âœ…`);
  }

  // ===========================
  // RECORD HISTORY
  // ===========================
  function getAllRecords() {
    const records = {};
    for (let i = 1; i <= 30; i++) { const r = localStorage.getItem(`record_day_${i}`); if(r) records[i] = JSON.parse(r); }
    return records;
  }

  function renderRecordHistory() {
    const records = getAllRecords();
    const container = document.getElementById('record-list');
    const days = Object.keys(records).map(Number).sort((a,b)=>b-a);
    if (days.length === 0) {
      container.innerHTML = '<div class="no-record">Belum ada record tersimpan.<br><span>Isi daily log di atas dan klik "Simpan" âœ¨</span></div>';
      return;
    }
    container.innerHTML = days.map(d => {
      const r = records[d];
      const dateStr = r.date ? new Date(r.date).toLocaleDateString('id-ID',{weekday:'short',day:'numeric',month:'short'}) : '';
      const sholatDots = ['Subuh','Dzuhur','Ashar','Maghrib','Isya'].map(s=>`<div class="sholat-dot ${r.sholat?.includes(s)?'done':''}"></div>`).join('');
      const mood = r.mood||'â€”'; const quranText = r.quran?'ðŸ“– '+r.quran:'';
      return `<div class="record-item" id="ri-${d}">
        <div class="record-header" onclick="toggleRecord(${d})">
          <div class="record-header-left">
            <div class="record-mood">${mood}</div>
            <div><div class="record-day-badge">Hari ${d}</div><div class="record-date">${dateStr}</div></div>
            <div class="record-sholat-mini">${sholatDots}</div>
          </div>
          <div style="display:flex;align-items:center;gap:10px">
            <div style="font-size:11px;color:var(--cream-dim);font-style:italic">${quranText}</div>
            <div class="record-chevron">â–¼</div>
          </div>
        </div>
        <div class="record-body">
          <div class="record-detail-grid">
            <div class="record-detail-item"><label>ðŸ“¿ Sunnah</label><p>${r.sunnah||''}</p></div>
            <div class="record-detail-item"><label>ðŸ’ Sedekah</label><p>${r.sedekah||''}</p></div>
            <div class="record-detail-item"><label>ðŸ’ª Amalan</label><p>${r.amalan||''}</p></div>
            <div class="record-detail-item"><label>ðŸ™ Syukur</label><p>${r.syukur||''}</p></div>
            <div class="record-detail-item" style="grid-column:1/-1"><label>ðŸŒ± Perbaikan Diri</label><p>${r.perbaikan||''}</p></div>
            <div class="record-detail-item" style="grid-column:1/-1"><label>ðŸ¤² Doa</label><p>${r.doa||''}</p></div>
          </div>
          <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
            <button class="record-delete" onclick="editDay(${d})">âœï¸ Edit hari ini</button>
            <button class="record-delete" onclick="deleteRecord(${d})">ðŸ—‘ï¸ Hapus record ini</button>
          </div>
        </div>
      </div>`;
    }).join('');
  }

  function toggleRecord(d) { document.getElementById(`ri-${d}`).classList.toggle('open'); }
  function editDay(d) { currentDayIndex=d; loadDayIntoForm(d); document.getElementById('daily-log-card').scrollIntoView({behavior:'smooth',block:'start'}); }
  function deleteRecord(d) {
    if(!confirm(`Hapus record Hari ${d}?`)) return;
    localStorage.removeItem(`record_day_${d}`);
    updateProgressBars(); renderRecordHistory();
    if(currentDayIndex===d) { document.getElementById('save-status').textContent='âœï¸ Belum disimpan'; document.getElementById('save-status').className='save-status'; }
  }
  function confirmClearAll() {
    if(!confirm('Hapus SEMUA record harian? Data tidak bisa dikembalikan.')) return;
    for(let i=1;i<=30;i++) localStorage.removeItem(`record_day_${i}`);
    updateProgressBars(); renderRecordHistory(); showToast('Semua record dihapus');
  }

  // ===========================
  // TARGET PERSISTENCE & PROGRESS
  // ===========================
  function saveTargets() {
    const data = {
      khatam: document.getElementById('target-khatam').value,
      sedekah: document.getElementById('target-sedekah').value,
      hafalan: document.getElementById('target-hafalan').value,
      kebiasaanBangun: document.getElementById('target-kebiasaan-bangun').value,
      kebiasaanTinggal: document.getElementById('target-kebiasaan-tinggal').value,
    };
    localStorage.setItem('ramadhan_targets', JSON.stringify(data));
    renderTargetUnits();
  }

  function loadTargets() {
    const saved = localStorage.getItem('ramadhan_targets');
    if (!saved) return;
    const data = JSON.parse(saved);
    if (data.khatam) document.getElementById('target-khatam').value = data.khatam;
    if (data.sedekah) document.getElementById('target-sedekah').value = data.sedekah;
    if (data.hafalan) document.getElementById('target-hafalan').value = data.hafalan;
    if (data.kebiasaanBangun) document.getElementById('target-kebiasaan-bangun').value = data.kebiasaanBangun;
    if (data.kebiasaanTinggal) document.getElementById('target-kebiasaan-tinggal').value = data.kebiasaanTinggal;
    renderTargetUnits();
  }

  function saveTargetProgress() {
    const prog = {
      khatam: document.getElementById('prog-khatam-input').value || 0,
      sedekah: document.getElementById('prog-sedekah-input').value || 0,
      hafalan: document.getElementById('prog-hafalan-input').value || 0,
    };
    localStorage.setItem('ramadhan_target_progress', JSON.stringify(prog));
  }

  function loadTargetProgress() {
    const saved = localStorage.getItem('ramadhan_target_progress');
    if (!saved) return;
    const prog = JSON.parse(saved);
    if (prog.khatam) document.getElementById('prog-khatam-input').value = prog.khatam;
    if (prog.sedekah) document.getElementById('prog-sedekah-input').value = prog.sedekah;
    if (prog.hafalan) document.getElementById('prog-hafalan-input').value = prog.hafalan;
    ['khatam','sedekah','hafalan'].forEach(k => updateTargetProgress(k));
  }

  function extractNumber(str) {
    if (!str) return null;
    const match = str.match(/[\d,.]+/);
    if (!match) return null;
    return parseFloat(match[0].replace(/,/g,'')) || null;
  }

  function renderTargetUnits() {
    const khatamTarget = extractNumber(document.getElementById('target-khatam').value);
    const sedekahTarget = extractNumber(document.getElementById('target-sedekah').value);
    const hafalanTarget = extractNumber(document.getElementById('target-hafalan').value);

    document.getElementById('prog-khatam-unit').textContent = khatamTarget ? `/ ${khatamTarget}x` : '/ â€”';
    document.getElementById('prog-sedekah-unit').textContent = sedekahTarget ? `/ ${sedekahTarget.toLocaleString('id-ID')}` : '/ â€”';
    document.getElementById('prog-hafalan-unit').textContent = hafalanTarget ? `/ ${hafalanTarget} surat` : '/ â€”';

    ['khatam','sedekah','hafalan'].forEach(k => updateTargetProgress(k));
  }

  function updateTargetProgress(key) {
    saveTargetProgress();
    const targets = { khatam: 'target-khatam', sedekah: 'target-sedekah', hafalan: 'target-hafalan' };
    const targetVal = extractNumber(document.getElementById(targets[key]).value);
    const progressVal = parseFloat(document.getElementById(`prog-${key}-input`).value) || 0;
    const row = document.getElementById(`prog-${key}-row`);
    const fill = document.getElementById(`prog-${key}-fill`);
    const val = document.getElementById(`prog-${key}-val`);

    if (targetVal && targetVal > 0) {
      row.style.display = 'flex';
      const pct = Math.min(100, Math.round((progressVal / targetVal) * 100));
      fill.style.width = pct + '%';
      val.textContent = pct + '%';
    } else {
      row.style.display = 'none';
    }
  }

  // Load targets on init
  loadTargets();
  loadTargetProgress();

  // ===========================
  // JUZ TRACKER (persistent)
  // ===========================
  const juzGrid = document.getElementById('juz-grid');
  let juzState = JSON.parse(localStorage.getItem('juz_state')||'{}');

  for (let i = 1; i <= 30; i++) {
    const item = document.createElement('div');
    item.className = 'juz-item' + (juzState[i]?' done':'');
    item.innerHTML = `<div class="juz-num">Juz ${i}</div><div class="juz-check">${juzState[i]?'âœ“':'â˜'}</div>`;
    item.onclick = function() {
      this.classList.toggle('done');
      juzState[i] = this.classList.contains('done');
      this.querySelector('.juz-check').textContent = juzState[i]?'âœ“':'â˜';
      localStorage.setItem('juz_state', JSON.stringify(juzState));
      updateJuzProgress();
    };
    juzGrid.appendChild(item);
  }

  function updateJuzProgress() {
    const done = Object.values(juzState).filter(Boolean).length;
    document.getElementById('juz-label').textContent = `${done} / 30 juz`;
    document.getElementById('juz-bar').style.width = `${(done/30)*100}%`;
  }

  // ===========================
  // WEEKLY CHECKLIST
  // ===========================
  function toggleCheck(li) {
    li.querySelector('.check-box').classList.toggle('checked');
    li.querySelector('.check-text').classList.toggle('checked');
  }

  // ===========================
  // INIT
  // ===========================
  updateJuzProgress();
  updateProgressBars();
  renderRecordHistory();

  // ===========================
  // KIRIM DOA VIA WHATSAPP
  // ===========================
  let selectedHubungan = { label:'', emoji:'' };
  let selectedTemplate = 'custom';

  const DOA_TEMPLATES = {
    umum: (n) => `ðŸŒ™ *Assalamu'alaikum ${n}*,\n\nDi bulan Ramadhan yang penuh berkah ini, aku titipkan doa tulus dari hatiku:\n\nðŸ¤² _Semoga Allah SWT senantiasa melimpahkan rahmat, keberkahan, dan perlindungan-Nya atasmu. Semoga ibadah Ramadhanmu diterima, dosa-dosamu diampuni, dan setiap doamu dikabulkan._\n\nRamadhan Mubarak, ${n}! ðŸŒŸ\n\n_Dikirim dengan penuh kasih sayang_ â¤ï¸`,
    ortu: (n) => `ðŸŒ™ *Assalamu'alaikum ${n}*,\n\n_Ridho Allah ada pada ridho orang tua._\n\nðŸ¤² Di Ramadhan yang mulia ini, aku berdoa:\n\n_Ya Allah, jagalah ${n}ku. Berikan beliau kesehatan, kebahagiaan, panjang umur yang berkah, dan ampunilah segala dosanya._\n\nTerima kasih sudah menjadi ${n} terbaik. Aku sangat menyayangimu. ðŸ’›\n\nRamadhan Mubarak! ðŸŒŸ`,
    pasangan: (n) => `ðŸŒ™ *Assalamu'alaikum ${n} Tersayangku*,\n\nðŸ¤² _Ya Allah, jagalah pasangan hidupku. Kuatkan cinta kami dalam keimanan, satukan kami dalam ketaatan, dan jadikan keluarga kami sakinah mawaddah warahmah._\n\nTerima kasih sudah menemani perjalanan ini. â¤ï¸\n\nRamadhan Mubarak, Sayang! ðŸŒŸ`,
    sahabat: (n) => `ðŸŒ™ *Assalamu'alaikum ${n}*,\n\nHei sahabat! ðŸ¤² _Semoga Allah permudah segala urusanmu, lapangkan rezekinya, dan jadikan kamu hamba yang selalu bersyukur._\n\nKamu sahabat terbaik! ðŸ¤ Ramadhan Mubarak, ${n}! âœ¨`,
    maaf: (n) => `ðŸŒ™ *Assalamu'alaikum ${n}*,\n\nDi bulan penuh ampunan ini, dengan hati yang tulus aku memohon maaf atas segala khilaf. ðŸ™\n\n_Minal aidin wal faizin._\n\nMaafkan aku ya, ${n}. Ramadhan Mubarak! ðŸŒŸ`,
    custom: (n) => `ðŸŒ™ *Assalamu'alaikum ${n}*,\n\n`
  };

  function openModal() {
    document.getElementById('modal-overlay').classList.add('open');
    document.body.style.overflow='hidden';
    ['inp-nama','inp-wa','inp-doa'].forEach(id=>document.getElementById(id).value='');
    document.getElementById('char-count').textContent='0';
    document.getElementById('preview-content').innerHTML='<span style="opacity:0.4;font-style:italic">Isi form di atas untuk melihat preview pesan...</span>';
    document.getElementById('btn-send').disabled=true;
    selectedHubungan={label:'',emoji:''};selectedTemplate='custom';
    document.querySelectorAll('.hub-btn').forEach(b=>b.classList.remove('selected'));
    document.querySelectorAll('.tpl-card').forEach((c,i)=>c.classList.toggle('active',i===5));
  }

  function closeModal() { document.getElementById('modal-overlay').classList.remove('open'); document.body.style.overflow=''; }
  function closeModalOutside(e) { if(e.target===document.getElementById('modal-overlay')) closeModal(); }

  function selectHubungan(btn, label, emoji) {
    document.querySelectorAll('.hub-btn').forEach(b=>b.classList.remove('selected'));
    btn.classList.add('selected'); selectedHubungan={label,emoji}; updatePreview();
  }

  function selectTemplate(card, type) {
    document.querySelectorAll('.tpl-card').forEach(c=>c.classList.remove('active'));
    card.classList.add('active'); selectedTemplate=type;
    const nama=document.getElementById('inp-nama').value.trim()||'[Nama]';
    if(type!=='custom') document.getElementById('inp-doa').value=DOA_TEMPLATES[type](nama);
    updatePreview();
  }

  function updatePreview() {
    const nama=document.getElementById('inp-nama').value.trim();
    const wa=document.getElementById('inp-wa').value.trim();
    if(selectedTemplate!=='custom'&&nama){
      const cur=document.getElementById('inp-doa').value;
      if(cur===DOA_TEMPLATES[selectedTemplate]('[Nama]')||cur==='') document.getElementById('inp-doa').value=DOA_TEMPLATES[selectedTemplate](nama);
    }
    const doa=document.getElementById('inp-doa').value;
    document.getElementById('char-count').textContent=doa.length;
    document.getElementById('btn-send').disabled=!(nama&&wa.replace(/\D/g,'').length>=8&&doa.length>5);
    if(!nama&&!doa){document.getElementById('preview-content').innerHTML='<span style="opacity:0.4;font-style:italic">Isi form di atas...</span>';return;}
    document.getElementById('preview-content').innerHTML=doa.replace(/\*(.+?)\*/g,'<strong>$1</strong>').replace(/_(.+?)_/g,'<em>$1</em>').replace(/\n/g,'<br>');
  }

  document.getElementById('inp-doa').addEventListener('input',function(){document.getElementById('char-count').textContent=this.value.length;updatePreview();});
  document.getElementById('inp-nama').addEventListener('input',updatePreview);

  function sendWhatsApp() {
    const nama=document.getElementById('inp-nama').value.trim();
    const waRaw=document.getElementById('inp-wa').value.trim().replace(/\D/g,'');
    const doa=document.getElementById('inp-doa').value.trim();
    if(!nama||!waRaw||!doa) return;
    let waNum=waRaw;
    if(waNum.startsWith('0')) waNum='62'+waNum.slice(1);
    else if(!waNum.startsWith('62')) waNum='62'+waNum;
    addRecipientCard(nama,selectedHubungan,waNum,doa);
    closeModal(); showToast(`Doa untuk ${nama} siap dikirim! ðŸ¤²`);
    setTimeout(()=>window.open(`https://wa.me/${waNum}?text=${encodeURIComponent(doa)}`,'_blank'),400);
  }

  function addRecipientCard(nama, hub, waNum, doa) {
    const container=document.getElementById('doa-recipients');
    const card=document.createElement('div'); card.className='recipient-card';
    const emoji=hub.emoji||'ðŸ¤²'; const label=hub.label||'Penerima';
    const doaData = JSON.stringify(doa);
    card.innerHTML=`
      <div class="recipient-info">
        <div class="recipient-emoji">${emoji}</div>
        <div><div class="recipient-name">${nama}</div><div class="recipient-hub">${label} Â· +${waNum}</div></div>
      </div>
      <div class="recipient-actions">
        <button class="btn-resend" onclick="window.open('https://wa.me/${waNum}?text='+encodeURIComponent(${doaData}),'_blank')">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
          Kirim Lagi
        </button>
        <button class="btn-delete" onclick="this.closest('.recipient-card').remove()" title="Hapus">âœ•</button>
      </div>`;
    container.appendChild(card);
  }

  // ===========================
  // TOAST
  // ===========================
  function showToast(msg) {
    let t=document.querySelector('.toast');
    if(!t){t=document.createElement('div');t.className='toast';document.body.appendChild(t);}
    t.textContent=msg; t.classList.add('show');
    setTimeout(()=>t.classList.remove('show'),3000);
  }
</script>

<!-- PWA INSTALL BANNER -->
<div id="pwa-install-bar">
  <div class="pwa-install-icon">ðŸŒ™</div>
  <div class="pwa-install-text">
    <div class="pwa-install-title">Install Ramadhan Planner</div>
    <div class="pwa-install-sub">Bisa dipakai offline, akses lebih cepat ðŸš€</div>
  </div>
  <button class="pwa-install-btn" id="pwa-install-btn">Install</button>
  <button class="pwa-install-close" id="pwa-install-close">âœ•</button>
</div>

<script>
// ===========================
// PWA SERVICE WORKER + INSTALL
// ===========================
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js').catch(() => {});
  });
}

let deferredPrompt = null;
const installBar = document.getElementById('pwa-install-bar');
const installBtn = document.getElementById('pwa-install-btn');
const installClose = document.getElementById('pwa-install-close');

window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  // Show install bar after 3 seconds if not dismissed
  const dismissed = localStorage.getItem('pwa_install_dismissed');
  if (!dismissed) {
    setTimeout(() => installBar.classList.add('show'), 3000);
  }
});

installBtn.addEventListener('click', async () => {
  if (!deferredPrompt) return;
  deferredPrompt.prompt();
  const { outcome } = await deferredPrompt.userChoice;
  if (outcome === 'accepted') {
    installBar.classList.remove('show');
    showToast('ðŸŒ™ Ramadhan Planner berhasil diinstall!');
  }
  deferredPrompt = null;
});

installClose.addEventListener('click', () => {
  installBar.classList.remove('show');
  localStorage.setItem('pwa_install_dismissed', '1');
});

window.addEventListener('appinstalled', () => {
  installBar.classList.remove('show');
  deferredPrompt = null;
});
</script>

</body>
</html>
